{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "public",
  "builds": [
    {
      "src": "server.js",
      "use": "@vercel/node",
      "config": {
        "includeFiles": ["src/**", "api/**", "package.json", "package-lock.json", "babel.config.json", "webpack.config.js", "public/js/bundled/**"],
        "memory": 1024,
        "maxDuration": 60
      }
    },
    {
      "src": "public/**", 
      "use": "@vercel/static"
    }
  ],
  "routes": [
    { "src": "/auth/callback", "dest": "/server.js" },
    { "src": "/api/(.*)", "dest": "/server.js" },
    { "src": "/dashboard", "dest": "/server.js" },
    { "src": "/dashboard/(.*)", "dest": "/server.js" },
    { "src": "/css/(.*)", "dest": "/public/css/$1" },
    { "src": "/js/(.*)", "dest": "/public/js/$1" },
    { "src": "/images/(.*)", "dest": "/public/images/$1" },
    { "src": "/(.*\\.(js|css|ico|jpg|jpeg|png|svg|webp|html))", "dest": "/public/$1" },
    { "src": "/(.*)", "dest": "/server.js" }
  ],
  "crons": [
    {
      "path": "/api/cron/process-jobs",
      "schedule": "* * * * *"
    }
  ]
}
